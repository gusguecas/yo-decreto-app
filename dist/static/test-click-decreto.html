<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Click Decreto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
</head>
<body class="bg-slate-900 text-white p-8">
    <h1 class="text-2xl mb-4">Test Click en Decreto</h1>
    <div id="resultado" class="mb-4"></div>
    
    <!-- Botón de prueba para simular clic -->
    <button 
        onclick="testClickDecreto()" 
        class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded mb-4"
    >
        Probar Click en Decreto
    </button>
    
    <!-- Cargar scripts de la aplicación -->
    <script src="/static/app.js"></script>
    <script src="/static/decretos.js"></script>
    
    <script>
        const resultado = document.getElementById('resultado')
        
        // Función de prueba
        function testClickDecreto() {
            console.log('🧪 Test: Probando click en decreto...')
            resultado.innerHTML = '🔄 Probando click...'
            
            try {
                // Verificar que Decretos existe
                if (typeof Decretos === 'undefined') {
                    console.error('❌ Decretos no está definido')
                    resultado.innerHTML = '❌ Error: Decretos no está definido'
                    return
                }
                
                // Verificar que la función openDetalleDecreto existe
                if (typeof Decretos.openDetalleDecreto !== 'function') {
                    console.error('❌ Decretos.openDetalleDecreto no es una función')
                    resultado.innerHTML = '❌ Error: openDetalleDecreto no es una función'
                    return
                }
                
                console.log('✅ Decretos encontrado, ejecutando openDetalleDecreto...')
                resultado.innerHTML = '✅ Ejecutando openDetalleDecreto...'
                
                // Simular clic en decreto
                Decretos.openDetalleDecreto('decreto_2')
                
                setTimeout(() => {
                    resultado.innerHTML = '✅ Función ejecutada. Revisa la consola para más detalles.'
                }, 1000)
                
            } catch (error) {
                console.error('❌ Error al ejecutar:', error)
                resultado.innerHTML = `❌ Error: ${error.message}`
            }
        }
        
        // Auto-ejecutar después de cargar
        setTimeout(() => {
            console.log('🔧 Auto-ejecutando test...')
            testClickDecreto()
        }, 3000)
    </script>
</body>
</html>